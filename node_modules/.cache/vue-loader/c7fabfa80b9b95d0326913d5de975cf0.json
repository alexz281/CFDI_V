{"remainingRequest":"C:\\Users\\a.coronel\\CFDI_V\\cfdi\\CFDI_V\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\a.coronel\\CFDI_V\\cfdi\\CFDI_V\\src\\App.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\a.coronel\\CFDI_V\\cfdi\\CFDI_V\\src\\App.vue","mtime":1620951158543},{"path":"C:\\Users\\a.coronel\\CFDI_V\\cfdi\\CFDI_V\\node_modules\\css-loader\\dist\\cjs.js","mtime":1619719079153},{"path":"C:\\Users\\a.coronel\\CFDI_V\\cfdi\\CFDI_V\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1619719080785},{"path":"C:\\Users\\a.coronel\\CFDI_V\\cfdi\\CFDI_V\\node_modules\\postcss-loader\\src\\index.js","mtime":1619719080351},{"path":"C:\\Users\\a.coronel\\CFDI_V\\cfdi\\CFDI_V\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1619719094489},{"path":"C:\\Users\\a.coronel\\CFDI_V\\cfdi\\CFDI_V\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619719058951},{"path":"C:\\Users\\a.coronel\\CFDI_V\\cfdi\\CFDI_V\\node_modules\\vue-loader\\lib\\index.js","mtime":1619719080785}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5naXZlLXNwYWNlLWZpZWxkLXJpZ2h0IHsKICBtYXJnaW4tcmlnaHQ6IDIwcHg7CiAgQG1lZGlhIChtYXgtd2lkdGg6IDk2MHB4KSB7CiAgICBtYXJnaW46IDBweCAxMHB4IDBweCAxMHB4OwogIH0KfQouZ2l2ZS1zcGFjZS1maWVsZC1sZWZ0IHsKICBtYXJnaW4tbGVmdDogMjBweDsKICBAbWVkaWEgKG1heC13aWR0aDogOTYwcHgpIHsKICAgIG1hcmdpbjogMHB4IDEwcHggMHB4IDEwcHg7CiAgfQp9Ci5naXZlLXNwYWNlLWZpZWxkLWNlbnRlciB7CiAgbWFyZ2luLWxlZnQ6IDIwcHg7CiAgQG1lZGlhIChtYXgtd2lkdGg6IDk2MHB4KSB7CiAgICBtYXJnaW46IDBweCAxMHB4IDBweCAxMHB4OwogIH0KfQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app>\n    <v-container>\n      <v-layout row wrap>\n       \n        <v-flex xs12 md2>\n          <div class=\"give-space-field-right\">\n            <v-select\n            v-model=\"companyFilterChoosed\"\n              :items=\"company\"\n              label=\"Escoge un filtro\"\n              @change=\"onFilterSelected\"\n            ></v-select>\n          </div>\n        </v-flex>\n\n        <v-flex xs18 md4>\n          <div >\n            <v-advanced-edit-dialog :return-value.sync=\"range\" title=\"Seleccionar Fecha\" scrollable max-width=\"300\">\n            <v-date-picker v-model=\"range\" lang=\"en\" range></v-date-picker>\n            <template #activator=\"{ attrs, on }\">\n            <v-text-field v-bind=\"attrs\" v-on=\"on\" readonly v-model=\"daterange\" @input=\"onFilterSelected\"></v-text-field>            \n        </template>\n      </v-advanced-edit-dialog>\n          </div>\n        </v-flex>        \n\n        <v-flex xs12 md2>\n          <div class=\"give-space-field-left\">\n            <v-select\n              v-model=\"cfdiFilterChoosed\"\n              :items=\"cfditype\"\n              label=\"Escoge un filtro\"\n              @change=\"onFilterSelected\"\n            ></v-select>\n          </div>\n        </v-flex>\n        \n          <v-data-table\n            :headers=\"headers\"\n            :items=\"cfdireport\"\n            :options.sync=\"pagination\"\n            :server-items-length=\"totalElements\"\n          >\n          </v-data-table>\n        \n      </v-layout>\n    </v-container>\n  </v-app>\n</template>\n\n<style lang=\"scss\">\n.give-space-field-right {\n  margin-right: 20px;\n  @media (max-width: 960px) {\n    margin: 0px 10px 0px 10px;\n  }\n}\n.give-space-field-left {\n  margin-left: 20px;\n  @media (max-width: 960px) {\n    margin: 0px 10px 0px 10px;\n  }\n}\n.give-space-field-center {\n  margin-left: 20px;\n  @media (max-width: 960px) {\n    margin: 0px 10px 0px 10px;\n  }\n}\n</style>\n\n<script>\nimport cfdiservices from \"@/services/cfdi\"\n// import cfdiFixtures from \"@/fixtures/cfdiFixtures\";\nimport { dateFormatOptions, dateStringToLocaleString } from \"@/utils/dateTimeUtils\"\nimport VAdvancedEditDialog from \"@/components/VAdvancedEditDialog\"\nexport default {\n  name: \"App\",\n  components: {\n    VAdvancedEditDialog\n  },\n  data: () => ({\n    filter: {\n      search: \"\",\n      added_by: \"\"\n    },\n    range: [],\n    pagination: {},\n    cfdiFilterChoosed: null,\n    cfditype: [\"\",\"Ingresos\", \"Egresos\"],\n    date: '',\n    time: '',\n    datetime: '',\n    shortcuts:[\n      {\n        text: 'Today',\n        Onclick: () =>{\n          this.range = [ new Date(), new Date() ]\n        }\n      }\n    ],\n    //pagination: {},    \n    companyFilterChoosed: null,\n    company: [\"\",\"CEL\",\"CON\",\"EGR\",\"HSJ\",\"ICL\",\"IMD\",\"INC\",\"IOR\",\"NTE\",\"NTN\",\"OCC\",\"ORD\",\"P21\",\"P22\",\"PIC\",\"PIO\",\"PIR\",\"RAM\",\"RCL\",\"RIC\",\"URU\"],\n    headers: [\n      {\n        text: \"Compa침ia\",\n        value: \"company\"\n      },\n      {\n        text: \"Status\",\n        value: \"status\"\n      },\n      {\n        text: \"Fecha de Cancelaci칩n\",\n        value: \"cancellation_datetime\"\n      },\n      {\n        text: \"Version\",\n        value:  \"version\"\n      },\n      {\n        text: \"Tipo de CFDI\",\n        value:  \"cfditype\"\n      },\n      {\n        text: \"CFDI\",\n        value:\"uuid\"},\n      {\n        text: \"Serie\",\n        value:  \"series\"\n      },\n      {\n        text: \"Folio\",\n        value:  \"folio\"\n      },\n      {\n        text: \"Emision\",\n        value: \"cfdidatetime\"\n      },\n      {\n        text: \"Receptor\",        \n        value: \"receiver_rfc\"\n      },\n      {\n        text: \"Descripci칩n del Receptor\",\n        value:  \"receiver_name\"\n      },\n      {\n        text: \"Emisor\",\n        value:  \"issuer_rfc\"\n      },\n      {\n        text: \"Descripci칩n del Emisor\",\n        value:  \"issuer_name\"\n      },\n      {\n        text: \"Descripcion\",\n        value:  \"descripcion\"\n      },\n      {\n        text: \"Metodo de Pago\",\n        value:  \"payment_method\"\n      },\n      {\n        text: \"Forma de Pago\",\n        value:  \"payment_mode\"\n      },\n      {\n        text: \"SubTotal\",\n        value:  \"subtotal\"\n      },\n      {\n        text: \"Descuento\",\n        value:  \"discount_total_amount\"\n      },\n      {\n        text: \"Impuestos\",\n        value:  \"taxes\"\n      },\n      {\n        text: \"IVA Retenido\",\n        value: \"iva_retenido\"},\n      {\n        text: \"Total\",\n        value: \"total\"},      \n    ],\n    cfdireport: [],\n    totalElements: 0\n  }),\n  created() {\n    this.getcfidireport()\n  },\n  mounted() {\n    console.log(this.pagination)\n  },\n  methods: {\n    milliSecondToDate(milliSecond) {\n      let time = new Date(milliSecond)\n      return time.toLocaleDateString();      \n    },\n    async getcfidireport() {\n      const companygroup = \"Inmobiliaria\"\n      let cfditype\n      let company\n      let datestart \n      let dateend \n      let page = this.pagination.page ? this.pagination.page - 1 : 0\n      let size = this.pagination.itemsPerPage ? this.pagination.itemsPerPage : 10\n      if (this.companyFilterChoosed == null || this.companyFilterChoosed ==  '') {\n        company = null\n      } else {\n        company = this.companyFilterChoosed\n      }\n      if (this.cfdiFilterChoosed == null) {\n        cfditype = null\n      } else {\n        cfditype = this.cfdiFilterChoosed == '' ? null : this.cfdiFilterChoosed\n      }\n      //var today = new Date();\n      if(this.daterange == '' || this.daterange == null || this.daterange == false){\n        this.datestart = null\n        this.end = null\n        //this.datestart = today.getFullYear + \"-01-01 00:00:000\"\n        //this.end = today.getFullYear + \"-\" + today.getMonth + \"-\" + today.getDay + \" \" +\"00:00:000\"\n      } else{\n        this.start = \"00:00:00\"\n        datestart = this.range[0] \n        datestart =  datestart +\" \"+ this.start\n        this.end = \"23:59:59\"\n        dateend = this.range[1]\n        dateend =  dateend +\" \"+ this.end\n      }\n      let res = await cfdiservices.getcfdireporissues(\n        companygroup,\n        company,\n        cfditype,\n        datestart,\n        dateend,\n        size,\n        page\n      )\n      if(res && res.content){\n        let cfdiresponse = res.content\n      this.cfdireport = cfdiresponse.map(report => {\n        return {\n          \"status\":  report.status,\n          \"cancellation_datetime\": this.milliSecondToDate(report.cancellation_datetime),\n          \"version\":  report.version,\n          \"cfditype\":  report.cfditype,\n          \"uuid\":  report.uuid,\n          \"series\":  report.series,\n          \"folio\":  report.folio,\n          \"cfdidatetime\": this.milliSecondToDate(report.cfdidatetime),\n          \"receiver_rfc\":  report.receiver_rfc,\n          \"receiver_name\":  report.receiver_name,\n          \"issuer_rfc\":  report.issuer_rfc,\n          \"issuer_name\":  report.issuer_name,\n          \"descripcion\":  report.descripcion,\n          \"discount_total_amount\":  report.discount_total_amount,\n          \"subtotal\":  report.subtotal,\n          \"taxes\":  report.taxes,\n          \"isr\":  report.isr,\n          \"iva\":  report.iva,\n          \"ieps\":  report.ieps,\n          \"iva_retenido\":  report.iva_retenido,\n          \"isr_retenido\":  report.isr_retenido,\n          \"transferred_taxes_total_amount\":  report.transferred_taxes_total_amount,\n          \"withheld_taxes_total_amount\":  report.withheld_taxes_total_amount,\n          \"total\":  report.total,\n          \"payment_method\":  report.payment_method,\n          \"payment_mode\":  report.payment_mode,\n          \"complement\":  report.complement,\n          \"company\":  report.company,\n        }\n      })\n      }\n      console.log(this.cfdireport)\n      if(res && res.content){\n        this.totalElements = res.totalElements\n      }\n    },    \n    onFilterSelected() {\n      this.getcfidireport()\n    }\n  },\n  watch: {\n    pagination: {\n      handler: function() {\n        this.getcfidireport()\n      },\n      deep: true\n    }\n  },\n  computed: {\n    daterange() {\n      return (this.range[0] !== undefined ? dateStringToLocaleString(this.range[0] + 'T00:00:00', dateFormatOptions, this.$vuetify.lang.current) +  (this.range[1] !== undefined ? \"-\" + dateStringToLocaleString(this.range[1] + 'T00:00:00', dateFormatOptions,this.$vuetify.lang.current) : '') : '') ; \n      }\n  },\n}\n</script>"]}]}